!function(e,t,n,i){"use strict";var l=l||{};l.funcs={},l.vars={onloaded:!1,$body:e("body"),$window:e(t),$document:e(n),$form_warning:null,is_confirm:!1,form_modified:!1,code_themes:[],is_rtl:e("body").hasClass("rtl")},l.helper={uid:function(e){return(e||"")+Math.random().toString(36).substr(2,9)},preg_quote:function(e){return(e+"").replace(/(\[|\])/g,"\\$1")},name_nested_replace:function(t,n){var i=RegExp(l.helper.preg_quote(n+"[\\d+]"),"g");t.find(":radio").each(function(){(this.checked||this.orginal_checked)&&(this.orginal_checked=!0)}),t.each(function(t){e(this).find(":input").each(function(){this.name=this.name.replace(i,n+"["+t+"]"),this.orginal_checked&&(this.checked=!0)})})},debounce:function(e,t,n){var i;return function(){var l=this,a=arguments,r=function(){i=null,n||e.apply(l,a)},o=n&&!i;clearTimeout(i),i=setTimeout(r,t),o&&e.apply(l,a)}}},e.fn.eventful_clone=function(){for(var t=e.fn.clone.apply(this,arguments),n=this.find("select").add(this.filter("select")),i=t.find("select").add(t.filter("select")),l=0;l<n.length;++l)for(var a=0;a<n[l].options.length;++a)!0===n[l].options[a].selected&&(i[l].options[a].selected=!0);return this.find(":radio").each(function(){this.orginal_checked=this.checked}),t},e.fn.eventful_expand_all=function(){return this.each(function(){e(this).on("click",function(t){t.preventDefault(),e(".eventful-wrapper").toggleClass("eventful-show-all"),e(".eventful-section").eventful_reload_script(),e(this).find(".fa").toggleClass("fa-indent").toggleClass("fa-outdent")})})},e.fn.eventful_nav_options=function(){return this.each(function(){var n,i=e(this),l=e(t),a=e("#wpwrap"),r=i.find("a");l.on("hashchange eventful.hashchange",function(){var i,l=t.location.hash.replace("#tab=","")||r.first().attr("href").replace("#tab=",""),o=e('[data-tab-id="'+l+'"]');if(o.length){o.closest(".eventful-tab-item").addClass("eventful-tab-expanded").siblings().removeClass("eventful-tab-expanded"),o.next().is("ul")&&(l=(o=o.next().find("li").first().find("a")).data("tab-id")),r.removeClass("eventful-active"),o.addClass("eventful-active"),n&&n.addClass("hidden");var f=e('[data-section-id="'+l+'"]');f.removeClass("hidden"),f.eventful_reload_script(),e(".eventful-section-id").val(f.index()+1),n=f,a.hasClass("wp-responsive-open")&&(e("html, body").animate({scrollTop:f.offset().top-50},200),a.removeClass("wp-responsive-open"))}}).trigger("eventful.hashchange")})},e.fn.eventful_nav_metabox=function(){return this.each(function(){var t,n=e(this),l=n.find("a"),a=n.parent().find(".eventful-section");l.each(function(n){e(this).on("click",function(r){r.preventDefault();var o=e(this);l.removeClass("eventful-active"),o.addClass("eventful-active"),t!==i&&t.addClass("hidden");var f=a.eq(n);f.removeClass("hidden"),f.eventful_reload_script(),t=f})}),l.first().trigger("click")})},e.fn.eventful_page_templates=function(){this.length&&e(n).on("change",".editor-page-attributes__template select, #page_template, .edit-post-post-status + div select",function(){var t=e(this).val()||"default";e(".eventful-page-templates").removeClass("eventful-metabox-show").addClass("eventful-metabox-hide"),e(".eventful-page-"+t.toLowerCase().replace(/[^a-zA-Z0-9]+/g,"-")).removeClass("eventful-metabox-hide").addClass("eventful-metabox-show")})},e.fn.eventful_post_formats=function(){this.length&&e(n).on("change",'.editor-post-format select, #formatdiv input[name="post_format"]',function(){var t=e(this).val()||"default";t="0"===t?"default":t,e(".eventful-post-formats").removeClass("eventful-metabox-show").addClass("eventful-metabox-hide"),e(".eventful-post-format-"+t).removeClass("eventful-metabox-hide").addClass("eventful-metabox-show")})},e.fn.eventful_search=function(){return this.each(function(){e(this).find("input").on("change keyup",function(){var t=e(this).val(),n=e(".eventful-wrapper"),i=n.find(".eventful-section").find("> .eventful-field:not(.eventful-depend-on)"),l=i.find("> .eventful-title, .eventful-search-tags");t.length>3?(i.addClass("eventful-metabox-hide"),n.addClass("eventful-search-all"),l.each(function(){var n=e(this);if(n.text().match(RegExp(".*?"+t+".*?","i"))){var i=n.closest(".eventful-field");i.removeClass("eventful-metabox-hide"),i.parent().eventful_reload_script()}})):(i.removeClass("eventful-metabox-hide"),n.removeClass("eventful-search-all"))})})},e.fn.eventful_sticky=function(){return this.each(function(){var n=e(this),i=e(t),l=n.find(".eventful-header-inner"),a=parseInt(l.css("padding-left"))+parseInt(l.css("padding-right")),r=0,o=!1,f=function(){var e=Math.max(32,n.offset().top-r),t=i.innerWidth();e<=32&&t>782?(l.css({width:n.outerWidth()-a}),n.css({height:n.outerHeight()}).addClass("eventful-sticky")):(l.removeAttr("style"),n.removeAttr("style").removeClass("eventful-sticky"))},d=function(){o||requestAnimationFrame(function(){f(),o=!1}),o=!0},s=function(){r=i.scrollTop(),d()};i.on("scroll resize",s),s()})},e.fn.eventful_dependency=function(){return this.each(function(){var t=e(this),n=t.children("[data-controller]");if(n.length){var i=e.eventful_deps.createRuleset(),a=e.eventful_deps.createRuleset(),r=[],o=[];n.each(function(){var t=e(this),n=t.data("controller").split("|"),l=t.data("condition").split("|"),f=t.data("value").toString().split("|"),d=!!t.data("depend-global"),s=d?a:i;e.each(n,function(e,n){var i=f[e]||"",a=l[e]||l[0];(s=s.createRule('[data-depend-id="'+n+'"]',a,i)).include(t),d?o.push(n):r.push(n)})}),r.length&&e.eventful_deps.enable(t,i,r),o.length&&e.eventful_deps.enable(l.vars.$body,a,o)}})},e.fn.eventful_field_accordion=function(){return this.each(function(){e(this).find(".eventful-accordion-title").on("click",function(){var t=e(this),n=t.find(".eventful-accordion-icon"),i=t.next();n.hasClass("fa-angle-right")?n.removeClass("fa-angle-right").addClass("fa-angle-down"):n.removeClass("fa-angle-down").addClass("fa-angle-right"),i.data("opened")||(i.eventful_reload_script(),i.data("opened",!0)),i.toggleClass("eventful-accordion-open")})})},e.fn.eventful_field_backup=function(){return this.each(function(){if(i!==t.wp.customize){var n=this,a=e(this),r=(e("body"),a.find(".eventful-import")),o=a.find(".eventful-reset");n.notificationOverlay=function(){wp.customize.notifications&&wp.customize.OverlayNotification&&(wp.customize.state("saved").get()||(wp.customize.state("changesetStatus").set("trash"),wp.customize.each(function(e){e._dirty=!1}),wp.customize.state("saved").set(!0)),wp.customize.notifications.add(new wp.customize.OverlayNotification("eventful_field_backup_notification",{type:"default",message:"&nbsp;",loading:!0})))},o.on("click",function(e){e.preventDefault(),l.vars.is_confirm&&(n.notificationOverlay(),t.wp.ajax.post("eventful-reset",{unique:o.data("unique"),nonce:o.data("nonce")}).done(function(e){t.location.reload(!0)}).fail(function(e){alert(e.error),wp.customize.notifications.remove("eventful_field_backup_notification")}))}),r.on("click",function(e){e.preventDefault(),l.vars.is_confirm&&(n.notificationOverlay(),t.wp.ajax.post("eventful-import",{unique:r.data("unique"),nonce:r.data("nonce"),data:a.find(".eventful-import-data").val()}).done(function(e){t.location.reload(!0)}).fail(function(e){alert(e.error),wp.customize.notifications.remove("eventful_field_backup_notification")}))})}})},e.fn.eventful_field_background=function(){return this.each(function(){e(this).find(".eventful--background-image").eventful_reload_script()})},e.fn.eventful_field_code_editor=function(){return this.each(function(){if("function"==typeof CodeMirror){var t=e(this),n=t.find("textarea"),i=t.find(".CodeMirror"),a=n.data("editor");i.length&&i.remove();var r=setInterval(function(){if(t.is(":visible")){var i=CodeMirror.fromTextArea(n[0],a);if("default"!==a.theme&&-1===l.vars.code_themes.indexOf(a.theme)){var o=e("<link>");e("#eful-codemirror-css").after(o),o.attr({rel:"stylesheet",id:"eful-codemirror-"+a.theme+"-css",href:a.cdnURL+"/css/"+a.theme+".min.css",type:"text/css",media:"all"}),l.vars.code_themes.push(a.theme)}CodeMirror.modeURL=a.cdnURL+"/js/%N.min.js",CodeMirror.autoLoadMode(i,a.mode),i.on("change",function(e,t){n.val(i.getValue()).trigger("change")}),clearInterval(r)}})}})},e.fn.eventful_field_date=function(){return this.each(function(){var t=e(this),n=t.find("input"),i=t.find(".eventful-date-settings").data("settings");i=e.extend({},i,{showAnim:"",beforeShow:function(t,n){e(n.dpDiv).addClass("eventful-datepicker-wrapper")},onClose:function(t,n){e(n.dpDiv).removeClass("eventful-datepicker-wrapper")}}),2===n.length&&(i=e.extend({},i,{onSelect:function(t){e(this),n.first();var l=n.first().attr("id")===e(this).attr("id")?"minDate":"maxDate",a=e.datepicker.parseDate(i.dateFormat,t);n.not(this).datepicker("option",l,a)}})),n.each(function(){var t=e(this);t.hasClass("hasDatepicker")&&t.removeAttr("id").removeClass("hasDatepicker"),t.datepicker(i)})})},e.fn.eventful_field_datetime=function(){return this.each(function(){var t=e(this),n=t.find("input"),i=t.find(".eventful-datetime-settings").data("settings");i=e.extend({},i,{onReady:function(t,n,i){e(i.calendarContainer).addClass("eventful-flatpickr")}}),2===n.length&&(i=e.extend({},i,{onChange:function(t,i,l){"from"===e(l.element).data("type")?n.last().get(0)._flatpickr.set("minDate",t[0]):n.first().get(0)._flatpickr.set("maxDate",t[0])}})),n.each(function(){e(this).flatpickr(i)})})},e.fn.eventful_field_fieldset=function(){return this.each(function(){e(this).find(".eventful-fieldset-content").eventful_reload_script()})},e.fn.eventful_field_gallery=function(){return this.each(function(){var n,i=e(this),l=i.find(".eventful-edit-gallery"),a=i.find(".eventful-clear-gallery"),r=i.find("ul"),o=i.find("input");i.find("img"),i.on("click",".eventful-button, .eventful-edit-gallery",function(i){var f=e(this),d=o.val(),s=f.hasClass("eventful-edit-gallery")?"edit":"add",c="add"!==s||d.length?"gallery-edit":"gallery";i.preventDefault(),void 0!==t.wp&&t.wp.media&&t.wp.media.gallery&&("gallery"===c?(n=t.wp.media({library:{type:"image"},frame:"post",state:"gallery",multiple:!0})).open():(n=t.wp.media.gallery.edit('[gallery ids="'+d+'"]'),"add"===s&&n.setState("gallery-library")),n.on("update",function(e){r.empty();var t=e.models.map(function(e){var t=e.toJSON(),n=t.sizes&&t.sizes.thumbnail&&t.sizes.thumbnail.url?t.sizes.thumbnail.url:t.url;return r.append('<li><img src="'+n+'"></li>'),t.id});o.val(t.join(",")).trigger("change"),a.removeClass("hidden"),l.removeClass("hidden")}))}),a.on("click",function(e){e.preventDefault(),r.empty(),o.val("").trigger("change"),a.addClass("hidden"),l.addClass("hidden")})})},e.fn.eventful_field_group=function(){return this.each(function(){var t=e(this),n=t.children(".eventful-fieldset"),i=n.length?n:t,a=i.children(".eventful-cloneable-wrapper"),r=i.children(".eventful-cloneable-hidden"),o=i.children(".eventful-cloneable-max"),f=i.children(".eventful-cloneable-min"),d=a.data("title-by"),s=a.data("title-by-prefix"),c=a.data("field-id"),u=Boolean(Number(a.data("title-number"))),v=parseInt(a.data("max")),h=parseInt(a.data("min"));a.hasClass("ui-accordion")&&a.find(".ui-accordion-header-icon").remove();var p=function(t){t.find(".eventful-cloneable-title-number").each(function(t){e(this).html(e(this).closest(".eventful-cloneable-item").index()+1+".")})};a.accordion({header:"> .eventful-cloneable-item > .eventful-cloneable-title",collapsible:!0,active:!1,animate:!1,heightStyle:"content",icons:{header:"eventful-cloneable-header-icon fas fa-angle-right",activeHeader:"eventful-cloneable-header-icon fas fa-angle-down"},activate:function(t,n){var i=n.newPanel,l=n.newHeader;if(i.length&&!i.data("opened")){var a=l.find(".eventful-cloneable-value"),r=[];e.each(d,function(e,t){r.push(i.find('[data-depend-id="'+t+'"]'))}),e.each(r,function(t,n){n.on("change keyup eventful.keyup",function(){var t=[];e.each(r,function(e,n){var i=n.val();i&&t.push(i)}),t.length&&a.text(t.join(s))}).trigger("eventful.keyup")}),i.eventful_reload_script(),i.data("opened",!0),i.data("retry",!1)}else i.data("retry")&&(i.eventful_reload_script_retry(),i.data("retry",!1))}}),a.sortable({axis:"y",handle:".eventful-cloneable-title,.eventful-cloneable-sort",helper:"original",cursor:"move",placeholder:"widget-placeholder",start:function(e,t){a.accordion({active:!1}),a.sortable("refreshPositions"),t.item.children(".eventful-cloneable-content").data("retry",!0)},update:function(e,t){l.helper.name_nested_replace(a.children(".eventful-cloneable-item"),c),a.eventful_customizer_refresh(),u&&p(a)}}),i.children(".eventful-cloneable-add").on("click",function(e){e.preventDefault();var t=a.children(".eventful-cloneable-item").length;if(f.hide(),v&&t+1>v){o.show();return}var n=r.eventful_clone(!0);n.removeClass("eventful-cloneable-hidden"),n.find(':input[name!="_pseudo"]').each(function(){this.name=this.name.replace("___","").replace(c+"[0]",c+"["+t+"]")}),a.append(n),a.accordion("refresh"),a.accordion({active:t}),a.eventful_customizer_refresh(),a.eventful_customizer_listen({closest:!0}),u&&p(a)});var g=function(t){t.preventDefault();var n=a.children(".eventful-cloneable-item").length;if(f.hide(),v&&n+1>v){o.show();return}var i=e(this).parent().parent(),r=i.children(".eventful-cloneable-helper").eventful_clone(!0),d=i.children(".eventful-cloneable-title").eventful_clone(),s=i.children(".eventful-cloneable-content").eventful_clone(),h=e('<div class="eventful-cloneable-item" />');h.append(r),h.append(d),h.append(s),a.children().eq(i.index()).after(h),l.helper.name_nested_replace(a.children(".eventful-cloneable-item"),c),a.accordion("refresh"),a.eventful_customizer_refresh(),a.eventful_customizer_listen({closest:!0}),u&&p(a)};a.children(".eventful-cloneable-item").children(".eventful-cloneable-helper").on("click",".eventful-cloneable-clone",g),i.children(".eventful-cloneable-hidden").children(".eventful-cloneable-helper").on("click",".eventful-cloneable-clone",g);var m=function(t){t.preventDefault();var n=a.children(".eventful-cloneable-item").length;if(o.hide(),f.hide(),h&&n-1<h){f.show();return}e(this).closest(".eventful-cloneable-item").remove(),l.helper.name_nested_replace(a.children(".eventful-cloneable-item"),c),a.eventful_customizer_refresh(),u&&p(a)};a.children(".eventful-cloneable-item").children(".eventful-cloneable-helper").on("click",".eventful-cloneable-remove",m),i.children(".eventful-cloneable-hidden").children(".eventful-cloneable-helper").on("click",".eventful-cloneable-remove",m)})},e.fn.eventful_field_icon=function(){return this.each(function(){var n=e(this);n.on("click",".eventful-icon-add",function(i){i.preventDefault();var a=e(this),r=e("#eventful-modal-icon");r.removeClass("hidden"),l.vars.$icon_target=n,l.vars.icon_modal_loaded||(r.find(".eventful-modal-loading").show(),t.wp.ajax.post("eventful-get-icons",{nonce:a.data("nonce")}).done(function(t){r.find(".eventful-modal-loading").hide(),l.vars.icon_modal_loaded=!0;var n=r.find(".eventful-modal-load").html(t.content);n.on("click","i",function(t){t.preventDefault();var n=e(this).attr("title");l.vars.$icon_target.find(".eventful-icon-preview i").removeAttr("class").addClass(n),l.vars.$icon_target.find(".eventful-icon-preview").removeClass("hidden"),l.vars.$icon_target.find(".eventful-icon-remove").removeClass("hidden"),l.vars.$icon_target.find("input").val(n).trigger("change"),r.addClass("hidden")}),r.on("change keyup",".eventful-icon-search",function(){var t=e(this).val();n.find("i").each(function(){var n=e(this);0>n.attr("title").search(RegExp(t,"i"))?n.hide():n.show()})}),r.on("click",".eventful-modal-close, .eventful-modal-overlay",function(){r.addClass("hidden")})}).fail(function(e){r.find(".eventful-modal-loading").hide(),r.find(".eventful-modal-load").html(e.error),r.on("click",function(){r.addClass("hidden")})}))}),n.on("click",".eventful-icon-remove",function(t){t.preventDefault(),n.find(".eventful-icon-preview").addClass("hidden"),n.find("input").val("").trigger("change"),e(this).addClass("hidden")})})},e.fn.eventful_field_map=function(){return this.each(function(){if("undefined"!=typeof L){var t=e(this),n=t.find(".eventful--map-osm"),i=t.find(".eventful--map-search input"),l=t.find(".eventful--latitude"),a=t.find(".eventful--longitude"),r=t.find(".eventful--zoom"),o=n.data("map"),f=L.map(n.get(0),o);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(f);var d=L.marker(o.center,{draggable:!0}).addTo(f),s=function(e){l.val(e.lat),a.val(e.lng),r.val(f.getZoom())};f.on("click",function(e){d.setLatLng(e.latlng),s(e.latlng)}),f.on("zoom",function(){s(d.getLatLng())}),d.on("drag",function(){s(d.getLatLng())}),i.length||(i=e('[data-depend-id="'+t.find(".eventful--address-field").data("address-field")+'"]'));var c={};i.autocomplete({source:function(t,n){var i=t.term;if(i in c){n(c[i]);return}e.get("https://nominatim.openstreetmap.org/search",{format:"json",q:i},function(e){var t;t=e.length?e.map(function(e){return{value:e.display_name,label:e.display_name,lat:e.lat,lon:e.lon}},"json"):[{value:"no-data",label:"No Results."}],c[i]=t,n(t)})},select:function(e,t){if("no-data"===t.item.value)return!1;var n=L.latLng(t.item.lat,t.item.lon);f.panTo(n),d.setLatLng(n),s(n)},create:function(t,n){e(this).autocomplete("widget").addClass("eventful-map-ui-autocomplate")}});var u=function(){var e=L.latLng(l.val(),a.val());f.panTo(e),d.setLatLng(e)};l.on("change",u),a.on("change",u)}})},e.fn.eventful_field_link=function(){return this.each(function(){var n=e(this),i=n.find(".eventful--link"),a=n.find(".eventful--add"),r=n.find(".eventful--edit"),o=n.find(".eventful--remove"),f=n.find(".eventful--result"),d=l.helper.uid("eventful-wplink-textarea-");a.on("click",function(e){e.preventDefault(),t.wpLink.open(d)}),r.on("click",function(t){t.preventDefault(),a.trigger("click"),e("#wp-link-url").val(n.find(".eventful--url").val()),e("#wp-link-text").val(n.find(".eventful--text").val()),e("#wp-link-target").prop("checked","_blank"===n.find(".eventful--target").val())}),o.on("click",function(e){e.preventDefault(),n.find(".eventful--url").val("").trigger("change"),n.find(".eventful--text").val(""),n.find(".eventful--target").val(""),a.removeClass("hidden"),r.addClass("hidden"),o.addClass("hidden"),f.parent().addClass("hidden")}),i.attr("id",d).on("change",function(){var i=t.wpLink.getAttrs(),l=i.href,d=e("#wp-link-text").val(),s=i.target?i.target:"";n.find(".eventful--url").val(l).trigger("change"),n.find(".eventful--text").val(d),n.find(".eventful--target").val(s),f.html('{url:"'+l+'", text:"'+d+'", target:"'+s+'"}'),a.addClass("hidden"),r.removeClass("hidden"),o.removeClass("hidden"),f.parent().removeClass("hidden")})})},e.fn.eventful_field_media=function(){return this.each(function(){var n,i=e(this),l=i.find(".eventful--button"),a=i.find(".eventful--remove"),r=l.data("library")&&l.data("library").split(",")||"",o=!!i.hasClass("eventful-assign-field-background")&&i.closest(".eventful-field-background").find(".eventful--auto-attributes");l.on("click",function(e){if(e.preventDefault(),void 0!==t.wp&&t.wp.media&&t.wp.media.gallery){if(n){n.open();return}(n=t.wp.media({library:{type:r}})).on("select",function(){var e,t=n.state().get("selection").first().attributes,f=l.data("preview-size")||"thumbnail";(!r.length||-1!==r.indexOf(t.subtype)||-1!==r.indexOf(t.type))&&(i.find(".eventful--id").val(t.id),i.find(".eventful--width").val(t.width),i.find(".eventful--height").val(t.height),i.find(".eventful--alt").val(t.alt),i.find(".eventful--title").val(t.title),i.find(".eventful--description").val(t.description),e=void 0!==t.sizes&&void 0!==t.sizes.thumbnail&&"thumbnail"===f?t.sizes.thumbnail.url:void 0!==t.sizes&&void 0!==t.sizes.full?t.sizes.full.url:"image"===t.type?t.url:t.icon,o&&o.removeClass("eventful--attributes-hidden"),a.removeClass("hidden"),i.find(".eventful--preview").removeClass("hidden"),i.find(".eventful--src").attr("src",e),i.find(".eventful--thumbnail").val(e),i.find(".eventful--url").val(t.url).trigger("change"))}),n.open()}}),a.on("click",function(e){e.preventDefault(),o&&o.addClass("eventful--attributes-hidden"),a.addClass("hidden"),i.find("input").val(""),i.find(".eventful--preview").addClass("hidden"),i.find(".eventful--url").trigger("change")})})},e.fn.eventful_field_repeater=function(){return this.each(function(){var t=e(this),n=t.children(".eventful-fieldset"),i=n.length?n:t,a=i.children(".eventful-repeater-wrapper"),r=i.children(".eventful-repeater-hidden"),o=i.children(".eventful-repeater-max"),f=i.children(".eventful-repeater-min"),d=a.data("field-id"),s=parseInt(a.data("max")),c=parseInt(a.data("min"));a.children(".eventful-repeater-item").children(".eventful-repeater-content").eventful_reload_script(),a.sortable({axis:"y",handle:".eventful-repeater-sort",helper:"original",cursor:"move",placeholder:"widget-placeholder",update:function(e,t){l.helper.name_nested_replace(a.children(".eventful-repeater-item"),d),a.eventful_customizer_refresh(),t.item.eventful_reload_script_retry()}}),i.children(".eventful-repeater-add").on("click",function(e){e.preventDefault();var t=a.children(".eventful-repeater-item").length;if(f.hide(),s&&t+1>s){o.show();return}var n=r.eventful_clone(!0);n.removeClass("eventful-repeater-hidden"),n.find(':input[name!="_pseudo"]').each(function(){this.name=this.name.replace("___","").replace(d+"[0]",d+"["+t+"]")}),a.append(n),n.children(".eventful-repeater-content").eventful_reload_script(),a.eventful_customizer_refresh(),a.eventful_customizer_listen({closest:!0})});var u=function(t){t.preventDefault();var n=a.children(".eventful-repeater-item").length;if(f.hide(),s&&n+1>s){o.show();return}var i=e(this).parent().parent().parent(),r=i.children(".eventful-repeater-content").eventful_clone(),c=i.children(".eventful-repeater-helper").eventful_clone(!0),u=e('<div class="eventful-repeater-item" />');u.append(r),u.append(c),a.children().eq(i.index()).after(u),u.children(".eventful-repeater-content").eventful_reload_script(),l.helper.name_nested_replace(a.children(".eventful-repeater-item"),d),a.eventful_customizer_refresh(),a.eventful_customizer_listen({closest:!0})};a.children(".eventful-repeater-item").children(".eventful-repeater-helper").on("click",".eventful-repeater-clone",u),i.children(".eventful-repeater-hidden").children(".eventful-repeater-helper").on("click",".eventful-repeater-clone",u);var v=function(t){t.preventDefault();var n=a.children(".eventful-repeater-item").length;if(o.hide(),f.hide(),c&&n-1<c){f.show();return}e(this).closest(".eventful-repeater-item").remove(),l.helper.name_nested_replace(a.children(".eventful-repeater-item"),d),a.eventful_customizer_refresh()};a.children(".eventful-repeater-item").children(".eventful-repeater-helper").on("click",".eventful-repeater-remove",v),i.children(".eventful-repeater-hidden").children(".eventful-repeater-helper").on("click",".eventful-repeater-remove",v)})},e.fn.eventful_field_slider=function(){return this.each(function(){var t=e(this),n=t.find("input"),i=t.find(".eventful-slider-ui"),l=n.data(),a=n.val()||0;i.hasClass("ui-slider")&&i.empty(),i.slider({range:"min",value:a,min:l.min||0,max:l.max||100,step:l.step||1,slide:function(e,t){n.val(t.value).trigger("change")}}),n.on("keyup",function(){i.slider("value",n.val())})})},e.fn.eventful_field_sortable=function(){return this.each(function(){var t=e(this).find(".eventful-sortable");t.sortable({axis:"y",helper:"original",cursor:"move",placeholder:"widget-placeholder",update:function(e,n){t.eventful_customizer_refresh()}}),t.find(".eventful-sortable-content").eventful_reload_script()})},e.fn.eventful_field_sorter=function(){return this.each(function(){var t=e(this),n=t.find(".eventful-enabled"),i=t.find(".eventful-disabled"),l=!!i.length&&i;n.sortable({connectWith:l,placeholder:"ui-sortable-placeholder",update:function(e,n){var i=n.item.find("input");n.item.parent().hasClass("eventful-enabled")?i.attr("name",i.attr("name").replace("disabled","enabled")):i.attr("name",i.attr("name").replace("enabled","disabled")),t.eventful_customizer_refresh()}}),l&&l.sortable({connectWith:n,placeholder:"ui-sortable-placeholder",update:function(e,n){t.eventful_customizer_refresh()}})})},e.fn.eventful_field_spinner=function(){return this.each(function(){var t=e(this),n=t.find("input"),i=t.find(".ui-button"),l=n.data();i.length&&i.remove(),n.spinner({min:l.min||0,max:l.max||100,step:l.step||1,create:function(e,t){l.unit&&n.after('<span class="ui-button eventful--unit">'+l.unit+"</span>")},spin:function(e,t){n.val(t.value).trigger("change")}})})},e.fn.eventful_field_switcher=function(){return this.each(function(){var t=e(this).find(".eventful--switcher");t.on("click",function(){var e=0,n=t.find("input");t.hasClass("eventful--active")?t.removeClass("eventful--active"):(e=1,t.addClass("eventful--active")),n.val(e).trigger("change")})})},e.fn.eventful_field_tabbed=function(){return this.each(function(){var t=e(this),n=t.find(".eventful-tabbed-nav a"),i=t.find(".eventful-tabbed-content");i.eq(0).eventful_reload_script(),n.on("click",function(t){t.preventDefault();var n=e(this),l=n.index(),a=i.eq(l);n.addClass("eventful-tabbed-active").siblings().removeClass("eventful-tabbed-active"),a.eventful_reload_script(),a.removeClass("hidden").siblings().addClass("hidden")})})},e.fn.eventful_field_typography=function(){return this.each(function(){var t=this,n=e(this),i=[],a=eventful_typography_json.webfonts,r=eventful_typography_json.googlestyles,o=eventful_typography_json.defaultstyles;t.sanitize_subset=function(e){return e=(e=e.replace("-ext"," Extended")).charAt(0).toUpperCase()+e.slice(1)},t.sanitize_style=function(e){return r[e]?r[e]:e},t.load_google_font=function(e,t,n){e&&"object"==typeof WebFont&&(t=t?t.replace("normal",""):"",n=n?n.replace("normal",""):"",(t||n)&&(e=e+":"+t+n),-1===i.indexOf(e)&&WebFont.load({google:{families:[e]}}),i.push(e))},t.append_select_options=function(n,i,l,a,r){n.find("option").not(":first").remove();var o="";e.each(i,function(e,n){var i,f=n;i=r?l&&-1!==l.indexOf(n)?" selected":"":l&&l===n?" selected":"","subset"===a?f=t.sanitize_subset(n):"style"===a&&(f=t.sanitize_style(n)),o+='<option value="'+n+'"'+i+">"+f+"</option>"}),n.append(o).trigger("eventful.change").trigger("chosen:updated")},t.init=function(){var i=[],r=n.find(".eventful--typography"),f=n.find(".eventful--type"),d=n.find(".eventful--block-font-style"),s=r.data("unit"),c=r.data("line-height-unit"),u=r.data("exclude")?r.data("exclude").split(","):[];n.find(".eventful--chosen").length&&n.find("select").each(function(){var t=e(this),n=t.parent().find(".chosen-container");n.length&&n.remove(),t.chosen({allow_single_deselect:!0,disable_search_threshold:15,width:"100%"})});var v=n.find(".eventful--font-family"),h=v.val();v.find("option").not(":first-child").remove();var p="";e.each(a,function(t,n){(!u||-1===u.indexOf(t))&&(p+='<optgroup label="'+n.label+'">',e.each(n.fonts,function(e,n){var i=(n="object"==typeof n?e:n)===h?" selected":"";p+='<option value="'+n+'" data-type="'+t+'"'+i+">"+n+"</option>"}),p+="</optgroup>")}),v.append(p).trigger("chosen:updated");var g=n.find(".eventful--block-font-style");if(g.length){var m=n.find(".eventful--font-style-select"),b=m.val()?m.val().replace(/normal/g,""):"";m.on("change eventful.change",function(e){var t=m.val();!t&&i&&-1===i.indexOf("normal")&&(t=i[0]);var l=t&&"italic"!==t&&"normal"===t?"normal":"",a=t&&"italic"!==t&&"normal"!==t?t.replace("italic",""):l,r=t&&"italic"===t.substr(-6)?"italic":"";n.find(".eventful--font-weight").val(a),n.find(".eventful--font-style").val(r)});var y=n.find(".eventful--block-extra-styles");if(y.length)var k=n.find(".eventful--extra-styles"),w=k.val()}var C=n.find(".eventful--block-subset");if(C.length)var x=n.find(".eventful--subset"),$=x.val(),_=x.data("multiple")||!1;var z=n.find(".eventful--block-backup-font-family");v.on("change eventful.change",function(e){C.length&&C.addClass("hidden"),y.length&&y.addClass("hidden"),z.length&&z.addClass("hidden");var n=v.find(":selected"),l=n.val(),r=n.data("type");if(r&&l){if(("google"===r||"custom"===r)&&z.length&&z.removeClass("hidden"),g.length){var s=o;"google"===r&&a[r].fonts[l][0]?s=a[r].fonts[l][0]:"custom"===r&&a[r].fonts[l]&&(s=a[r].fonts[l]),i=s;var c=-1!==s.indexOf("normal")?"normal":s[0],u=b&&-1!==s.indexOf(b)?b:c;t.append_select_options(m,s,u,"style"),b=!1,g.removeClass("hidden"),"google"===r&&y.length&&s.length>1&&(t.append_select_options(k,s,w,"style",!0),w=!1,y.removeClass("hidden"))}if("google"===r&&C.length&&a[r].fonts[l][1]){var h=a[r].fonts[l][1],p=h.length<2&&"latin"!==h[0]?h[0]:"",D=$&&-1!==h.indexOf($)?$:p;D=_&&$?$:D,t.append_select_options(x,h,D,"subset",_),$=!1,C.removeClass("hidden")}}else d.find(":input").val(""),C.length&&(x.find("option").not(":first-child").remove(),x.trigger("chosen:updated")),g.length&&(m.find("option").not(":first-child").remove(),m.trigger("chosen:updated"));f.val(r)}).trigger("eventful.change");var D=n.find(".eventful--block-preview");if(D.length){var O=n.find(".eventful--preview");n.on("change",l.helper.debounce(function(e){D.removeClass("hidden");var i=v.val(),l=n.find(".eventful--font-weight").val(),a=n.find(".eventful--font-style").val(),r=n.find(".eventful--font-size").val(),o=n.find(".eventful--font-variant").val(),f=n.find(".eventful--line-height").val(),d=n.find(".eventful--text-align").val(),u=n.find(".eventful--text-transform").val(),h=n.find(".eventful--text-decoration").val(),p=n.find(".eventful--color").val(),g=n.find(".eventful--word-spacing").val(),m=n.find(".eventful--letter-spacing").val(),b=n.find(".eventful--custom-style").val();"google"===n.find(".eventful--type").val()&&t.load_google_font(i,l,a);var y={};i&&(y.fontFamily=i),l&&(y.fontWeight=l),a&&(y.fontStyle=a),o&&(y.fontVariant=o),r&&(y.fontSize=r+s),f&&(y.lineHeight=f+c),m&&(y.letterSpacing=m+s),g&&(y.wordSpacing=g+s),d&&(y.textAlign=d),u&&(y.textTransform=u),h&&(y.textDecoration=h),p&&(y.color=p),O.removeAttr("style"),b&&O.attr("style",b),O.css(y)},100)),D.on("click",function(){O.toggleClass("eventful--black-background");var e=D.find(".eventful--toggle");e.hasClass("fa-toggle-off")?e.removeClass("fa-toggle-off").addClass("fa-toggle-on"):e.removeClass("fa-toggle-on").addClass("fa-toggle-off")}),D.hasClass("hidden")||n.trigger("change")}},t.init()})},e.fn.eventful_field_upload=function(){return this.each(function(){var n,i=e(this),l=i.find("input"),a=i.find(".eventful--button"),r=i.find(".eventful--remove"),o=i.find(".eventful--preview"),f=i.find(".eventful--src"),d=a.data("library")&&a.data("library").split(",")||"";a.on("click",function(e){if(e.preventDefault(),void 0!==t.wp&&t.wp.media&&t.wp.media.gallery){if(n){n.open();return}(n=t.wp.media({library:{type:d}})).on("select",function(){var e=n.state().get("selection").first().attributes;(!d.length||-1!==d.indexOf(e.subtype)||-1!==d.indexOf(e.type))&&l.val(e.url).trigger("change")}),n.open()}}),r.on("click",function(e){e.preventDefault(),l.val("").trigger("change")}),l.on("change",function(t){var n=l.val();n?r.removeClass("hidden"):r.addClass("hidden"),o.length&&(-1!==e.inArray(n.split(".").pop().toLowerCase(),["jpg","jpeg","gif","png","svg","webp"])?(o.removeClass("hidden"),f.attr("src",n)):o.addClass("hidden"))})})},e.fn.eventful_field_wp_editor=function(){return this.each(function(){if(void 0!==t.wp.editor&&void 0!==t.tinyMCEPreInit&&void 0!==t.tinyMCEPreInit.mceInit.eventful_wp_editor){var n=e(this),i=n.find(".eventful-wp-editor"),a=n.find("textarea");(n.find(".wp-editor-wrap").length||n.find(".mce-container").length)&&(i.empty(),i.append(a),a.css("display",""));var r=l.helper.uid("eventful-editor-");a.attr("id",r);var o={tinymce:t.tinyMCEPreInit.mceInit.eventful_wp_editor,quicktags:t.tinyMCEPreInit.qtInit.eventful_wp_editor},f=i.data("editor-settings"),d=wp.oldEditor?wp.oldEditor:wp.editor;d&&d.hasOwnProperty("autop")&&(wp.editor.autop=d.autop,wp.editor.removep=d.removep,wp.editor.initialize=d.initialize);var s=function(e){e.on("change keyup",function(){var t=f.wpautop?e.getContent():wp.editor.removep(e.getContent());a.val(t).trigger("change")})};o.tinymce=e.extend({},o.tinymce,{selector:"#"+r,setup:s}),!1===f.tinymce&&(o.tinymce=!1,i.addClass("eventful-no-tinymce")),!1===f.quicktags&&(o.quicktags=!1,i.addClass("eventful-no-quicktags"));var c=setInterval(function(){n.is(":visible")&&(t.wp.editor.initialize(r,o),clearInterval(c))});if(f.media_buttons&&t.eventful_media_buttons){var u=i.find(".wp-media-buttons");if(u.length)u.find(".eventful-shortcode-button").data("editor-id",r);else{var v=e(t.eventful_media_buttons);v.find(".eventful-shortcode-button").data("editor-id",r),i.prepend(v)}}}})},e.fn.eventful_confirm=function(){return this.each(function(){e(this).on("click",function(n){var i=e(this).data("confirm")||t.eventful_vars.i18n.confirm;if(!confirm(i))return n.preventDefault(),!1;l.vars.is_confirm=!0,l.vars.form_modified=!1})})},e.fn.serializeObject=function(){var t={};return e.each(this.serializeArray(),function(n,l){var a=l.name,r=l.value;t[a]=i===t[a]?r:e.isArray(t[a])?t[a].concat(r):[t[a],r]}),t},e.fn.eventful_save=function(){return this.each(function(){var n,i=e(this),a=e(".eventful-save"),r=e(".eventful-options"),o=!1;i.on("click",function(f){if(!o){var d=i.data("save"),s=i.val();a.attr("value",d),i.hasClass("eventful-save-ajax")?(f.preventDefault(),r.addClass("eventful-saving"),a.prop("disabled",!0),t.wp.ajax.post("eventful_"+r.data("unique")+"_ajax_save",{data:e("#eventful-form").serializeJSONEFUL()}).done(function(t){if(e(".eventful-error").remove(),Object.keys(t.errors).length){var i='<i class="eventful-label-error eventful-error">!</i>';e.each(t.errors,function(t,n){var l=e('[data-depend-id="'+t+'"]'),a=e('a[href="#tab='+l.closest(".eventful-section").data("section-id")+'"]'),r=a.closest(".eventful-tab-item");l.closest(".eventful-fieldset").append('<p class="eventful-error eventful-error-text">'+n+"</p>"),a.find(".eventful-error").length||a.append(i),r.find(".eventful-arrow .eventful-error").length||r.find(".eventful-arrow").append(i)})}r.removeClass("eventful-saving"),a.prop("disabled",!1).attr("value",s),o=!1,l.vars.form_modified=!1,l.vars.$form_warning.hide(),clearTimeout(n);var f=e(".eventful-form-success");f.empty().append(t.notice).fadeIn("fast",function(){n=setTimeout(function(){f.fadeOut("fast")},1e3)})}).fail(function(e){alert(e.error)})):l.vars.form_modified=!1}o=!0})})},e.fn.eventful_options=function(){return this.each(function(){var a=e(this),r=a.find(".eventful-content"),o=a.find(".eventful-form-success"),f=a.find(".eventful-form-warning"),d=a.find(".eventful-header .eventful-save");l.vars.$form_warning=f,f.length&&(t.onbeforeunload=function(){return!!l.vars.form_modified||i},r.on("change keypress",":input",function(){l.vars.form_modified||(o.hide(),f.fadeIn("fast"),l.vars.form_modified=!0)})),o.hasClass("eventful-form-show")&&setTimeout(function(){o.fadeOut("fast")},1e3),e(n).keydown(function(e){if((e.ctrlKey||e.metaKey)&&83===e.which)return d.trigger("click"),e.preventDefault(),!1})})},e.fn.eventful_taxonomy=function(){return this.each(function(){var t=e(this),n=t.parents("form");if("addtag"===n.attr("id")){var i=n.find("#submit"),l=t.children(".eventful-field").eventful_clone();i.on("click",function(){n.find(".form-required").hasClass("form-invalid")||(t.data("inited",!1),t.empty(),t.html(l),l=l.eventful_clone(),t.eventful_reload_script())})}})},e.fn.eventful_shortcode=function(){var a=this;return a.shortcode_parse=function(t,n){var i="";return e.each(t,function(t,l){i+="["+(n=n||t),e.each(l,function(e,t){"content"===e?(i+="]",i+=t,i+="[/"+n):i+=a.shortcode_tags(e,t)}),i+="]"}),i},a.shortcode_tags=function(t,n){var i="";return""!==n&&("object"!=typeof n||e.isArray(n)?i+=" "+t+'="'+n.toString()+'"':e.each(n,function(e,t){"background-image"===e&&(t=t.url?t.url:""),""!==t&&(i+=" "+e+'="'+t.toString()+'"')})),i},a.insertAtChars=function(e,t){var n=void 0!==e[0].name?e[0]:e;return n.value.length&&void 0!==n.selectionStart?(n.focus(),n.value.substring(0,n.selectionStart)+t+n.value.substring(n.selectionEnd,n.value.length)):(n.focus(),t)},a.send_to_editor=function(t,n){var i;if("undefined"!=typeof tinymce&&(i=tinymce.get(n)),i&&!i.isHidden())i.execCommand("mceInsertContent",!1,t);else{var l=e("#"+n);l.val(a.insertAtChars(l,t)).trigger("change")}},this.each(function(){var r,o,f,d,s,c,u,v,h,p=e(this),g=p.find(".eventful-modal-load"),m=(p.find(".eventful-modal-content"),p.find(".eventful-modal-insert")),b=p.find(".eventful-modal-loading"),y=p.find("select"),k=p.data("modal-id"),w=p.data("nonce");e(n).on("click",'.eventful-shortcode-button[data-modal-id="'+k+'"]',function(t){t.preventDefault(),r=(h=e(this)).data("editor-id")||!1,o=h.data("target-id")||!1,f=h.data("gutenberg-id")||!1,p.removeClass("hidden"),p.hasClass("eventful-shortcode-single")&&s===i&&y.trigger("change")}),y.on("change",function(){var n=e(this),i=n.find(":selected");d=n.val(),s=i.data("shortcode"),c=i.data("view")||"normal",u=i.data("group")||s,g.empty(),d?(b.show(),t.wp.ajax.post("eventful-get-shortcode-"+k,{shortcode_key:d,nonce:w}).done(function(t){b.hide();var n=e(t.content).appendTo(g);m.parent().removeClass("hidden"),v=n.find(".eventful--repeat-shortcode").eventful_clone(),n.eventful_reload_script(),n.find(".eventful-fields").eventful_reload_script()})):m.parent().addClass("hidden")}),m.on("click",function(n){if(n.preventDefault(),!(m.prop("disabled")||m.attr("disabled"))){var i="",l=p.find(".eventful-field:not(.eventful-depend-on)").find(":input:not(.ignore)").serializeObjectEFUL();switch(c){case"contents":var d=s?l[s]:l;e.each(d,function(e,t){var n=s||e;i+="["+n+"]"+t+"[/"+n+"]"});break;case"group":i+="["+s,e.each(l[s],function(e,t){i+=a.shortcode_tags(e,t)}),i+="]",i+=a.shortcode_parse(l[u],u),i+="[/"+s+"]";break;case"repeater":i+=a.shortcode_parse(l[u],u);break;default:i+=a.shortcode_parse(l)}if(i=""===i?"["+s+"]":i,f){var v=t.eventful_gutenberg_props.attributes.hasOwnProperty("shortcode")?t.eventful_gutenberg_props.attributes.shortcode:"";t.eventful_gutenberg_props.setAttributes({shortcode:v+i})}else if(r)a.send_to_editor(i,r);else{var g=o?e(o):h.parent().find("textarea");g.val(a.insertAtChars(g,i)).trigger("change")}p.addClass("hidden")}}),p.on("click",".eventful--repeat-button",function(e){e.preventDefault();var t=p.find(".eventful--repeatable"),n=v.eventful_clone(),i=n.find(".eventful-repeat-remove");n.appendTo(t),n.find(".eventful-fields").eventful_reload_script(),l.helper.name_nested_replace(p.find(".eventful--repeat-shortcode"),u),i.on("click",function(){n.remove(),l.helper.name_nested_replace(p.find(".eventful--repeat-shortcode"),u)})}),p.on("click",".eventful-modal-close, .eventful-modal-overlay",function(){p.addClass("hidden")})})},"function"==typeof Color&&(Color.prototype.toString=function(){if(this._alpha<1)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var e=parseInt(this._color,10).toString(16);if(this.error)return"";if(e.length<6)for(var t=6-e.length-1;t>=0;t--)e="0"+e;return"#"+e}),l.funcs.parse_color=function(e){var t=e.replace(/\s+/g,""),n=-1!==t.indexOf("rgba")?parseFloat(100*t.replace(/^.*,(.+)\)/,"$1")):100;return{value:t,transparent:n,rgba:n<100}},e.fn.eventful_color=function(){return this.each(function(){var n,i=e(this),a=l.funcs.parse_color(i.val()),r=!t.eventful_vars.color_palette.length||t.eventful_vars.color_palette;i.hasClass("wp-color-picker")&&i.closest(".wp-picker-container").after(i).remove(),i.wpColorPicker({palettes:r,change:function(e,t){var l=t.color.toString();n.removeClass("eventful--transparent-active"),n.find(".eventful--transparent-offset").css("background-color",l),i.val(l).trigger("change")},create:function(){n=i.closest(".wp-picker-container");var t=i.data("a8cIris"),r=e('<div class="eventful--transparent-wrap"><div class="eventful--transparent-slider"></div><div class="eventful--transparent-offset"></div><div class="eventful--transparent-text"></div><div class="eventful--transparent-button">transparent <i class="fas fa-toggle-off"></i></div></div>').appendTo(n.find(".wp-picker-holder")),o=r.find(".eventful--transparent-slider"),f=r.find(".eventful--transparent-text"),d=r.find(".eventful--transparent-offset"),s=r.find(".eventful--transparent-button");"transparent"===i.val()&&n.addClass("eventful--transparent-active"),s.on("click",function(){"transparent"!==i.val()?(i.val("transparent").trigger("change").removeClass("iris-error"),n.addClass("eventful--transparent-active")):(i.val(t._color.toString()).trigger("change"),n.removeClass("eventful--transparent-active"))}),o.slider({value:a.transparent,step:1,min:0,max:100,slide:function(e,n){var l=parseFloat(n.value/100);t._color._alpha=l,i.wpColorPicker("color",t._color.toString()),f.text(1===l||0===l?"":l)},create:function(){var e=parseFloat(a.transparent/100);f.text(e<1?e:""),d.css("background-color",a.value),n.on("click",".wp-picker-clear",function(){t._color._alpha=1,f.text(""),o.slider("option","value",100),n.removeClass("eventful--transparent-active"),i.trigger("change")}),n.on("click",".wp-picker-default",function(){var e=l.funcs.parse_color(i.data("default-color")),a=parseFloat(e.transparent/100);t._color._alpha=a,f.text(a<1?a:""),o.slider("option","value",e.transparent),"transparent"===e.value&&(i.removeClass("iris-error"),n.addClass("eventful--transparent-active"))})}})}})})},e.fn.eventful_chosen=function(){return this.each(function(){var n=e(this),l=n.parent().find(".chosen-container"),a=n.hasClass("eventful-chosen-sortable")||!1,r=n.hasClass("eventful-chosen-ajax")||!1,o=n.attr("multiple")||!1,f=e.extend({allow_single_deselect:!0,disable_search_threshold:10,width:o?"100%":"auto",no_results_text:t.eventful_vars.i18n.no_results_text},n.data("chosen-settings"));if(l.length&&l.remove(),r){var d=e.extend({data:{type:"post",nonce:""},allow_single_deselect:!0,disable_search_threshold:-1,width:"100%",min_length:3,type_delay:500,typing_text:t.eventful_vars.i18n.typing_text,searching_text:t.eventful_vars.i18n.searching_text,no_results_text:t.eventful_vars.i18n.no_results_text},n.data("chosen-settings"));n.EFULAjaxChosen(d)}else n.chosen(f);if(o){var s=n.parent().find(".eventful-hide-select"),c=s.val()||[];n.on("change",function(e,n){n&&n.selected?s.append('<option value="'+n.selected+'" selected="selected">'+n.selected+"</option>"):n&&n.deselected&&s.find('option[value="'+n.deselected+'"]').remove(),i!==t.wp.customize&&0===s.children().length&&s.data("customize-setting-link")&&t.wp.customize.control(s.data("customize-setting-link")).setting.set(""),s.trigger("change")}),n.EFULChosenOrder(c,!0)}if(a){var u=n.parent().find(".chosen-container").find(".chosen-choices");u.bind("mousedown",function(t){e(t.target).is("span")&&t.stopPropagation()}),u.sortable({items:"li:not(.search-field)",helper:"orginal",cursor:"move",placeholder:"search-choice-placeholder",start:function(e,t){t.placeholder.width(t.item.innerWidth()),t.placeholder.height(t.item.innerHeight())},update:function(t,i){var l="",a=n.data("chosen"),r=n.parent().find(".eventful-hide-select");u.find(".search-choice-close").each(function(){var t=e(this).data("option-array-index");e.each(a.results_data,function(e,n){n.array_index===t&&(l+='<option value="'+n.value+'" selected>'+n.value+"</option>")})}),r.children().remove(),r.append(l),r.trigger("change")}})}})},e.fn.eventful_checkbox=function(){return this.each(function(){var t=e(this),n=t.find(".eventful--input"),i=t.find(".eventful--checkbox");i.on("click",function(){n.val(Number(i.prop("checked"))).trigger("change")})})},e.fn.eventful_checkbox_all=function(){return this.each(function(){var t=e(this);t.on("click",function(){var n=t.closest(".eventful-field-checkbox").find(":input"),i=!1;n.each(function(){e(this).prop("checked")||(i=!0)}),i?(n.prop("checked","checked"),n.attr("checked","checked")):(n.prop("checked",""),n.removeAttr("checked")),n.first().trigger("change")})})},e.fn.eventful_siblings=function(){return this.each(function(){var t=e(this),n=t.find(".eventful--sibling"),i=t.data("multiple")||!1;n.on("click",function(){var n=e(this);i?n.hasClass("eventful--active")?(n.removeClass("eventful--active"),n.find("input").prop("checked",!1).trigger("change")):(n.addClass("eventful--active"),n.find("input").prop("checked",!0).trigger("change")):(t.find("input").prop("checked",!1),n.find("input").prop("checked",!0).trigger("change"),n.addClass("eventful--active").siblings().removeClass("eventful--active"))})})},e.fn.eventful_help=function(){return this.each(function(){var t,n,a=e(this);a.on({mouseenter:function(){t=e('<div class="eventful-tooltip"></div>').html(a.find(".eventful-help-text").html()).appendTo("body"),n=l.vars.is_rtl?a.offset().left+24:a.offset().left-t.outerWidth(),t.css({top:a.offset().top-(t.outerHeight()/2-14),left:n})},mouseleave:function(){t!==i&&t.remove()}})})},e.fn.eventful_customizer_refresh=function(){return this.each(function(){var l=e(this),a=l.closest(".eventful-customize-complex");if(a.length){var r=a.data("unique-id");if(r===i)return;var o=a.find(":input"),f=a.data("option-id"),d=o.serializeObjectEFUL(),s=!e.isEmptyObject(d)&&d[r]&&d[r][f]?d[r][f]:"",c=t.wp.customize.control(r+"["+f+"]");c.setting._value=null,c.setting.set(s)}else l.find(":input").first().trigger("change");e(n).trigger("eventful-customizer-refresh",l)})},e.fn.eventful_customizer_listen=function(n){var l=e.extend({closest:!1},n);return this.each(function(){if(i!==t.wp.customize){var n=l.closest?e(this).closest(".eventful-customize-complex"):e(this),a=n.find(":input"),r=n.data("unique-id"),o=n.data("option-id");r!==i&&a.on("change keyup eventful.change",function(){var i=n.find(":input").serializeObjectEFUL(),l=!e.isEmptyObject(i)&&i[r]&&i[r][o]?i[r][o]:"";t.wp.customize.control(r+"["+o+"]").setting.set(l)})}})},e(n).on("expanded",".control-section",function(){var t=e(this);if(t.hasClass("open")&&!t.data("inited")){var n=t.find(".eventful-customize-field"),i=t.find(".eventful-customize-complex");n.length&&(t.eventful_dependency(),n.eventful_reload_script({dependency:!1}),i.eventful_customizer_listen()),t.data("inited",!0)}}),l.vars.$window.on("resize eventful.resize",l.helper.debounce(function(n){(navigator.userAgent.indexOf("AppleWebKit/")>-1?l.vars.$window.width():t.innerWidth)<=782&&!l.vars.onloaded&&(e(".eventful-section").eventful_reload_script(),l.vars.onloaded=!0)},200)).trigger("eventful.resize"),e.fn.eventful_widgets=function(){return this.each(function(){e(n).on("widget-added widget-updated",function(e,t){var n=t.find(".eventful-fields");n.length&&n.eventful_reload_script()}),e(n).on("click",".widget-top",function(t){var n=e(this).parent().find(".eventful-fields");n.length&&n.eventful_reload_script()}),e(".widgets-sortables, .control-section-sidebar").on("sortstop",function(e,t){t.item.find(".eventful-fields").eventful_reload_script_retry()})})},e.fn.eventful_nav_menu=function(){return this.each(function(){var t=e(this);t.on("click","a.item-edit",function(){e(this).closest("li.menu-item").find(".eventful-fields").eventful_reload_script()}),t.on("sortstop",function(e,t){t.item.find(".eventful-fields").eventful_reload_script_retry()})})},e.fn.eventful_reload_script_retry=function(){return this.each(function(){var t=e(this);t.data("inited")&&t.children(".eventful-field-wp_editor").eventful_field_wp_editor()})},e.fn.eventful_reload_script=function(t){var i=e.extend({dependency:!0},t);return this.each(function(){var t=e(this);t.data("inited")||(t.children(".eventful-field-accordion").eventful_field_accordion(),t.children(".eventful-field-backup").eventful_field_backup(),t.children(".eventful-field-background").eventful_field_background(),t.children(".eventful-field-code_editor").eventful_field_code_editor(),t.children(".eventful-field-date").eventful_field_date(),t.children(".eventful-field-datetime").eventful_field_datetime(),t.children(".eventful-field-fieldset").eventful_field_fieldset(),t.children(".eventful-field-gallery").eventful_field_gallery(),t.children(".eventful-field-group").eventful_field_group(),t.children(".eventful-field-icon").eventful_field_icon(),t.children(".eventful-field-link").eventful_field_link(),t.children(".eventful-field-media").eventful_field_media(),t.children(".eventful-field-map").eventful_field_map(),t.children(".eventful-field-repeater").eventful_field_repeater(),t.children(".eventful-field-slider").eventful_field_slider(),t.children(".eventful-field-sortable").eventful_field_sortable(),t.children(".eventful-field-sorter").eventful_field_sorter(),t.children(".eventful-field-spinner").eventful_field_spinner(),t.children(".eventful-field-switcher").eventful_field_switcher(),t.children(".eventful-field-tabbed").eventful_field_tabbed(),t.children(".eventful-field-typography").eventful_field_typography(),t.children(".eventful-field-upload").eventful_field_upload(),t.children(".eventful-field-wp_editor").eventful_field_wp_editor(),t.children(".eventful-field-box_shadow").find(".eventful-color").eventful_color(),t.children(".eventful-field-border").find(".eventful-color").eventful_color(),t.children(".eventful-field-background").find(".eventful-color").eventful_color(),t.children(".eventful-field-color").find(".eventful-color").eventful_color(),t.children(".eventful-field-color_group").find(".eventful-color").eventful_color(),t.children(".eventful-field-link_color").find(".eventful-color").eventful_color(),t.children(".eventful-field-typography").find(".eventful-color").eventful_color(),t.children(".eventful-field-select").find(".eventful-chosen").eventful_chosen(),t.children(".eventful-field-checkbox").find(".eventful-checkbox").eventful_checkbox(),t.children(".eventful-field-checkbox").find(".eventful-checkbox-all").eventful_checkbox_all(),t.children(".eventful-field-button_set").find(".eventful-siblings").eventful_siblings(),t.children(".eventful-field-image_select").find(".eventful-siblings").eventful_siblings(),t.children(".eventful-field-layout_preset").find(".eventful-siblings").eventful_siblings(),t.children(".eventful-field-palette").find(".eventful-siblings").eventful_siblings(),t.children(".eventful-field").find(".eventful-help").eventful_help(),i.dependency&&t.eventful_dependency(),t.data("inited",!0),e(n).trigger("eventful-reload-script",t))})},e(n).ready(function(){e(".eventful-save").eventful_save(),e(".eventful-options").eventful_options(),e(".eventful-sticky-header").eventful_sticky(),e(".eventful-nav-options").eventful_nav_options(),e(".eventful-nav-metabox").eventful_nav_metabox(),e(".eventful-taxonomy").eventful_taxonomy(),e(".eventful-page-templates").eventful_page_templates(),e(".eventful-post-formats").eventful_post_formats(),e(".eventful-shortcode").eventful_shortcode(),e(".eventful-search").eventful_search(),e(".eventful-confirm").eventful_confirm(),e(".eventful-expand-all").eventful_expand_all(),e(".eventful-onload").eventful_reload_script(),e("#widgets-editor").eventful_widgets(),e("#widgets-right").eventful_widgets(),e("#menu-to-edit").eventful_nav_menu()})}(jQuery,window,document);